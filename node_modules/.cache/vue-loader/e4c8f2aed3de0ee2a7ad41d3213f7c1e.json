{"remainingRequest":"/home/track/workplace/a2/frontend/widget/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/track/workplace/a2/frontend/widget/src/views/Widget/Survey.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/track/workplace/a2/frontend/widget/src/views/Widget/Survey.vue","mtime":1626269659574},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAdHJhY2tzYWxlL2Rlc2lnbi1zeXN0ZW0nCmltcG9ydCBjb25zdHMgZnJvbSAnLi4vLi4vY29uc3RzJwppbXBvcnQgeyB1c2VyTGFuZ3VhZ2UgfSBmcm9tICcuLi8uLi91dGlscy9sYW5ndWFnZScKaW1wb3J0IHsgZ2V0VXNlckNvbnRleHRCeU1ldHJpYyB9IGZyb20gJy4uLy4uL3V0aWxzL3N1cnZleScKaW1wb3J0IERpc3BsYXlXZWIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9zdXJ2ZXkvRGlzcGxheVdlYicKCmltcG9ydCBXaWRnZXRVc2VDYXNlIGZyb20gJy4uLy4uL2FyY2gvd2lkZ2V0L3VzZWNhc2UnCmNvbnN0IHdpZGdldFVzZUNhc2UgPSBuZXcgV2lkZ2V0VXNlQ2FzZSgpCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgRGlzcGxheVdlYiwKICAgIEJ1dHRvbiwKICB9LAogIHByb3BzOiB7CiAgICB3aWRnZXQ6IE9iamVjdCwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhbnN3ZXJzOiBbXSwKICAgICAgc3RhcnRUaW1lOiAwLAogICAgICBjdXJyZW50SW5kZXg6IDAsCiAgICAgIGludGVyYWN0aW9uVVVJRDogbnVsbCwKICAgICAgc2hvd1RoYW5rc01lc3NhZ2U6IGZhbHNlLAogICAgICBzaG93RXJyb3JNZXNzYWdlOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGxhbmd1YWdlOiAncHRfQlInLAogICAgICBkZWZhdWx0TWVzc2FnZTogewogICAgICAgIGVuX1VTOiAnVGhhbmsgeW91IGZvciB5b3VyIGZlZWRiYWNrIScsCiAgICAgICAgcHRfQlI6ICdBZ3JhZGVjZW1vcyBwb3Igc2V1IGZlZWRiYWNrIScsCiAgICAgICAgZXNfRVM6ICfCoUdyYWNpYXMgcG9yIHR1cyBjb21lbnRhcmlvcyEnLAogICAgICB9LAogICAgICBsb2dvOgogICAgICAgICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUI0QUFBQWVDQVlBQUFBN01LNmlBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUFYTlNSMElBcnM0YzZRQUFBQVJuUVUxQkFBQ3hqd3Y4WVFVQUFBWGdTVVJCVkhnQnJWZGZhRnRsRkQvbisrNU5YVldXb3N3aHFObEFabVZya3c1bkVhVHBubndZTEFxQytMQ21nOEdZbzBrSEF4VXh6WU5qVUVheitlQndZbE1FRVFaYkNuc1k3S0YzYi9OaHZTa1Q2NnpRRkgwM3duVHJjci92ZU03TjBuOWIwc3g1MnBEa2ZuOSs1Ky92bkNDMEkzNDI2a0xuRUZsS29zSTRCWFk0ZU9PMEowdk83Q2NEaUZoQVN4VUNuTmJLZXZjU3B5dWJYZWxzQmhpQnpvd2x5UEszS0FNQXNhemJZd2hCWXh3UTR3cHNDc0hTcy83SktRMjFmRFZScURTN1dqVmJjUDFQTXk0OHZXaUpjZ0MwdGZFY0dXSHRQaVJWWlhYNElndHNMVGxBeUorSEZLRC9ncC9OTnJzZjRSRldhdWljVUFUcEJ6dUkvNUQvUFRBbS80eHpyOHlXVk5jZWlmS1oreEJKYXJJcGpYWklpeUpZVjhKQkt2emUrK1ZvYTJDSkpYWE84S2Q0NDVFQUJzQks5SDJ4QkcwSUt4R0xBSXhwWlE1cDhRSloxQnJLTnJnN1dFa1VWeFJlRjJOMmJZN0E5bUpESDZMUllPK3BBanlHUElocittWC9XRVVwK3R4aDkydHI0NDdXRS94OEdEWmE3UHFmWllEc0tnakJjRzN2cVNJOGdienFIMGtyVGQrSzVRNVlkTWlNenZaK1YxZ0Y5aitPYVZLem5HbGRJU1pCbmkwZGcvOUJkcytsTXhxaDRJamIwVlE3Zzc5M2VJbFNOY3hxRjFST0lVU2hya3F4SGREbi9STVQyOHFaeWMzMi9kUmJQT3VnOFRRR25HdzJHamlSYkIyR3JYVkpMWExxa3BRS1orV096UWpnT2Y5RW1pK2JkTUZ3UVM0bi8raTVjTDNWL3Y1Ykh5UTF3QXpmRGV6Mkt0V0NIVXFESHBDU0NldVRyVzJIZGRobE9YR2Rpd0ZzQVV4dHR2L0duaDg4QmNaendsaWI2Rk91U1VtNXBhUm1aSU0xTkwzWkpkdjhrWndMTmlhZ25DekZoWjZ2UjZFTmNiRTJ4VjRpUjZ4VzBLdVlCbU9OUmFQdmVxME9iK2NhWlhKZ053Y1VRUU1MOFFzcjVaSDBVOUZXWnlNYVBNMmhZWXM1cDB5U2xUYWo0RGlBTlZ1RmZlc1phYU1vY1RHYVZ5SmcwSVdBVmdCZGQ0SXRFZUIzbTUyOTJsMnFITGgxWUw4T3JZY3FRcHV5M1Q4YWk2QmVqR0FOeE5vSVcvMVVzTHd6NHRyTGJFRThBZ0d6bEJtOHN1ZUsxODU5Q3RxVUR0U1RMb1p1Z2tqNEN0QjFhWWJkMTh2V2l5THNUaE52OXo1SCtxbndwc09INy9TTlA3SXNYdktQcFJVRVNVNG9ZbUNVdlc0OVhyR09VSm1BMEpqRGwzcXVGbHVCSGZwbDhLQWk2dUtTSW9kalU5UkVNU1lRSWZpdWpaMUh4RldVcTF0cU1SSmFWN2U4cmtoUTFSYmZLL1ZjOVZxQnB2MWtsS3VuRkRZT3RHWEZyYXVzdWVsSm1qdHJ1bEpEZHM0ZFpkQWd0Z0swK2hJRktweVhnNlUxY2Yzb2R2L1F5UHkrc1kzMzZBN09aRkVZUTA4dEtTbHNTWE4rWjFZeHViV2JZNXhRL0N3cm16dFVhQ1hLWjQ3eFgzeTQ0R0J0LytWZFYrWWErNC9kZml2bkVCVWoybWF5OC9IWU9tQkZRdzV4aU1SQU5KY2RCcHhpaTVtSm9JdkpQQ2xnbGNUNWlteG1zSVBNc1Z0ZEtYd0tsdmpBTk1lb2RHM1BKVytqUlVmbisza1FNR2xtTmVreVVVZXBJWDZjZjdBV2s3RW9wRXl5RmJoN2Y5cVJtTDdvSHovSE1jN0pBczh0UXZ5RGNtQ0xyVTFaSlJScDUzN3MrZDZERm5LKys0YXM3emk1a0JnZzBxbkFtS2tWYXhFbmxTZ2ZlcGE4TTRseXZZNWpQSGtRM2w5a2JhTWNjeUh5MGZuZWJ4NXJBR2dteDIvMzU1anR4Z1NZdmJWa3JCa3NkSmNyWVIxWDJHcVhLTzlDNkg5NVRjVG5EZzNCRThvSUp4b2J3Y0NHdUhLUWg1RzhnTXJhQ29IOGx2aUtrOFVVRytDdXNzWCtXeC9tNEQvS3lLOXZaaFRab2t3ZTdGN2t3ams3M2oxYmJLeXZvOHk0bjQ1cXh6SWJXWjZSNjUyRUQwNUJyWmJucWFFQ2JjaHhUakpHa1h3WkVGQ1p4VG5aaXVPN2JnNnYzZmNRVnd2NEZyM016Y0JtNjhWdUpMazRxMmxLS1RQdExOL3hTZ2x2SGNsSTFyTHprdUZvaXpUQTUxRE95bkNoQ00rTnYzYnpvZm02YVpOSS92eCt4aVdUWTNkMTZkQnlxWE1KQS8rdXNMYnY0dTVyWmRsM1pPSHRBV1hzVE5oblF4b05CM3Blb1QrNXpSOCtzK3RtNlZIM04yMFMzdXNYei9Jdmd6NGV5SXQxMXJMMTRtY1M2YURhU3UvVlFZMWJwTVU2aDdOcndWVDVMUi84WTNjMkF4VnArZHRKZWlpL0RhZm0zOGtydzVUbjBFRnBERXhpcTVvYlZkVnVyYXdKcm5NQ2xZSjd0bHhJekxiczZ5TC9BbGZjdXA1T3dWblZBQUFBQUVsRlRrU3VRbUNDJywKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSh7CiAgICAgIGN1c3RvbWVyOiBzdGF0ZSA9PiBzdGF0ZS53aWRnZXQuY3VzdG9tZXIsCiAgICAgIGludGVyYWN0aW9uOiBzdGF0ZSA9PiBzdGF0ZS53aWRnZXQuaW50ZXJhY3Rpb24sCiAgICAgIGVkaXRNb2RlOiBzdGF0ZSA9PiBzdGF0ZS53aWRnZXQuZWRpdE1vZGUsCiAgICB9KSwKICAgIGN1cnJlbnRJdGVtKCkgewogICAgICByZXR1cm4gdGhpcy53aWRnZXQuc3VydmV5Lml0ZW1zW3RoaXMuY3VycmVudEluZGV4XQogICAgfSwKICAgIGN1cnJlbnRBbnN3ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRBbnN3ZXIodGhpcy5jdXJyZW50SW5kZXgpCiAgICB9LAogICAgdXNlckxhbmd1YWdlKCkgewogICAgICByZXR1cm4gdXNlckxhbmd1YWdlKCkKICAgIH0sCiAgICBzaG93TmV4dCgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID09PSB0aGlzLndpZGdldC5zdXJ2ZXkuaXRlbXMubGVuZ3RoIC0gMSB8fCB0aGlzLmxvYWRpbmcpIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZQogICAgfSwKICAgIHNob3dQcmV2aW91cygpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ICYmICF0aGlzLndpZGdldC5zdXJ2ZXkuanVtcF9ydWxlc19lbmFibGVkICYmICF0aGlzLmxvYWRpbmcpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZQogICAgfSwKICAgIHNob3dTdWJtaXQoKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA9PT0gdGhpcy53aWRnZXQuc3VydmV5Lml0ZW1zLmxlbmd0aCAtIDEgJiYgIXRoaXMubG9hZGluZykgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlCiAgICB9LAogICAgY29sb3JzKCkgewogICAgICBsZXQgcHJpbWFyeUNvbG9yID0gdGhpcy53aWRnZXQuc3VydmV5LnByaW1hcnlfY29sb3IgfHwgJyMzNTQwNTInCiAgICAgIGxldCBzZWNvbmRhcnlDb2xvciA9ICcjZmZmJwogICAgICBpZiAoIXRoaXMud2lkZ2V0LnN1cnZleV9jb2xvcnMpIHsKICAgICAgICBzZWNvbmRhcnlDb2xvciA9IHRoaXMud2lkZ2V0LnNlY29uZGFyeV9jb2xvcgogICAgICAgIHByaW1hcnlDb2xvciA9IHRoaXMud2lkZ2V0LnByaW1hcnlfY29sb3IKICAgICAgfQogICAgICByZXR1cm4geyBwcmltYXJ5Q29sb3IsIHNlY29uZGFyeUNvbG9yIH0KICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBNdXRhdGlvbnMoewogICAgICBzaG93V2lkZ2V0OiAnd2lkZ2V0L3Nob3dXaWRnZXQnLAogICAgfSksCiAgICBzZWxlY3RWYWx1ZShpdGVtKSB7CiAgICAgIGNvbnN0IGFuc3dlckluZGV4ID0gdGhpcy5hbnN3ZXJzLmZpbmRJbmRleChhbnN3ZXIgPT4gYW5zd2VyLnV1aWQgPT09IGl0ZW0udXVpZCkKICAgICAgaWYgKGl0ZW0uYW5zd2VyLmNvbW1lbnQpIHsKICAgICAgICBpdGVtLmFuc3dlci5jb21tZW50ID0gaXRlbS5hbnN3ZXIuY29tbWVudC50cmltKCkKICAgICAgfQogICAgICBpZiAoYW5zd2VySW5kZXggPT09IC0xKSB7CiAgICAgICAgdGhpcy5hbnN3ZXJzID0gdGhpcy5hbnN3ZXJzLmNvbmNhdChpdGVtKQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IG5ld0Fuc3dlcnMgPSB0aGlzLmFuc3dlcnMuZmlsdGVyKChpLCBpbmRleCkgPT4gaW5kZXggIT09IGFuc3dlckluZGV4KQogICAgICAgIHRoaXMuYW5zd2VycyA9IG5ld0Fuc3dlcnMuY29uY2F0KGl0ZW0pCiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVQcmV2aW91c0l0ZW0oKSB7CiAgICAgIHRoaXMuY3VycmVudEluZGV4LS0KICAgIH0sCiAgICBoYW5kbGVOZXh0SXRlbSgpIHsKICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUXVlc3Rpb24oKSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGNvbnN0IGN1cnJlbnRRdWVzdGlvbkl0ZW0gPSB0aGlzLndpZGdldC5zdXJ2ZXkuaXRlbXNbdGhpcy5jdXJyZW50SW5kZXhdCiAgICAgIGNvbnN0IGN1cnJlbnRBbnN3ZXIgPSB0aGlzLmFuc3dlcnNbdGhpcy5jdXJyZW50SW5kZXhdCgogICAgICAvLyBRdWVzdGlvbiBjdXJzb3IgdG8gbmV4dCBxdWVzdGlvbgogICAgICB0aGlzLmN1cnJlbnRJbmRleCsrCgogICAgICBpZiAoY3VycmVudFF1ZXN0aW9uSXRlbS5qdW1wX3J1bGVzX2VuYWJsZWQpIHsKICAgICAgICBpZiAoIWN1cnJlbnRBbnN3ZXIgfHwgY3VycmVudEFuc3dlci5hbnN3ZXIucmVzcG9uc2UubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleC0tCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgY29uc3QgY29udGV4dCA9IGdldFVzZXJDb250ZXh0QnlNZXRyaWMoCiAgICAgICAgICBjdXJyZW50QW5zd2VyLnR5cGUsCiAgICAgICAgICBjdXJyZW50QW5zd2VyLmFuc3dlci5yZXNwb25zZSwKICAgICAgICAgIGN1cnJlbnRRdWVzdGlvbkl0ZW0ubWluX3NjYWxlLAogICAgICAgICAgY3VycmVudFF1ZXN0aW9uSXRlbS5tYXhfc2NhbGUsCiAgICAgICAgKQogICAgICAgIGNvbnN0IGFjdGlvbiA9IGN1cnJlbnRRdWVzdGlvbkl0ZW0uanVtcF9ydWxlc1tjb250ZXh0XS5hY3Rpb24KICAgICAgICBpZiAoYWN0aW9uID09PSBjb25zdHMuSlVNUF9BQ1RJT05TLlNQRUNJRklDX1FVRVNUSU9OKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IGN1cnJlbnRRdWVzdGlvbkl0ZW0uanVtcF9ydWxlc1tjb250ZXh0XS52YWx1ZQogICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBjb25zdHMuSlVNUF9BQ1RJT05TLkZJTklTSF9TVVJWRVkpIHsKICAgICAgICAgIHRoaXMuc3VibWl0Q29tcGxldGVBbnN3ZXIoY29uc3RzLklOVEVSQUNUSU9OX1NUQVRVUy5ET05FKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5hbnN3ZXJzLmxlbmd0aCkgewogICAgICAgIHRoaXMuc3VibWl0UGFydGlhbEFuc3dlcihjb25zdHMuSU5URVJBQ1RJT05fU1RBVFVTLlBBUlRJQUwpCiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBzdWJtaXRQYXJ0aWFsQW5zd2VyKCkgewogICAgICBpZiAodGhpcy5lZGl0TW9kZSkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGNvbnN0IHRvdGFsVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5zdGFydFRpbWUKICAgICAgY29uc3Qgc3VydmV5QW5zd2VyID0gewogICAgICAgIHF1ZXN0aW9uczogdGhpcy5hbnN3ZXJzLAogICAgICAgIHJlc3BvbnNlX3RpbWU6IHRvdGFsVGltZSA+IDAgPyB0b3RhbFRpbWUgOiAwLAogICAgICAgIHN0YXR1czogY29uc3RzLklOVEVSQUNUSU9OX1NUQVRVUy5QQVJUSUFMLAogICAgICAgIGludGVyYWN0aW9uX3V1aWQ6IHRoaXMuaW50ZXJhY3Rpb25VVUlELAogICAgICAgIGxhbmd1YWdlOiB0aGlzLmxhbmd1YWdlLAogICAgICAgIGN1c3RvbWVyOiB0aGlzLmN1c3RvbWVyLAogICAgICAgIGludGVyYWN0aW9uOiB0aGlzLmludGVyYWN0aW9uLAogICAgICB9CgogICAgICB0aGlzLmludGVyYWN0aW9uVVVJRCA9IGF3YWl0IHdpZGdldFVzZUNhc2UucG9zdFBhcnRpYWxBbnN3ZXIodGhpcy53aWRnZXQuc3VydmV5X3B1YmxpY19oYXNoLCBzdXJ2ZXlBbnN3ZXIpCiAgICB9LAogICAgYXN5bmMgc3VibWl0Q29tcGxldGVBbnN3ZXIoKSB7CiAgICAgIGlmICghdGhpcy52YWxpZGF0ZVF1ZXN0aW9uKCkpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBpZiAodGhpcy5lZGl0TW9kZSkgewogICAgICAgIHRoaXMuc2hvd1RoYW5rc01lc3NhZ2UgPSB0cnVlCiAgICAgICAgY29uc3Qgdm0gPSB0aGlzCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIHZtLmNsZWFyV2lkZ2V0KCkKICAgICAgICB9LCAyMDAwKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgY29uc3QgdG90YWxUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLnN0YXJ0VGltZQogICAgICBjb25zdCBzdXJ2ZXlBbnN3ZXIgPSB7CiAgICAgICAgcXVlc3Rpb25zOiB0aGlzLmFuc3dlcnMsCiAgICAgICAgcmVzcG9uc2VfdGltZTogdG90YWxUaW1lID4gMCA/IHRvdGFsVGltZSA6IDAsCiAgICAgICAgc3RhdHVzOiBjb25zdHMuSU5URVJBQ1RJT05fU1RBVFVTLkRPTkUsCiAgICAgICAgaW50ZXJhY3Rpb25fdXVpZDogdGhpcy5pbnRlcmFjdGlvblVVSUQsCiAgICAgICAgbGFuZ3VhZ2U6IHRoaXMubGFuZ3VhZ2UsCiAgICAgICAgY3VzdG9tZXI6IHRoaXMuY3VzdG9tZXIsCiAgICAgICAgaW50ZXJhY3Rpb246IHRoaXMuaW50ZXJhY3Rpb24sCiAgICAgIH0KICAgICAgYXdhaXQgd2lkZ2V0VXNlQ2FzZS5wb3N0Q29tcGxldGVBbnN3ZXIodGhpcy53aWRnZXQuc3VydmV5X3B1YmxpY19oYXNoLCBzdXJ2ZXlBbnN3ZXIpCiAgICAgIHRoaXMuc2hvd1RoYW5rc01lc3NhZ2UgPSB0cnVlCiAgICAgIGNvbnN0IHZtID0gdGhpcwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHZtLnNob3dXaWRnZXQoZmFsc2UpCiAgICAgIH0sIDIwMDApCiAgICB9LAogICAgZ2V0Q3VycmVudEFuc3dlcihxdWVzdGlvbkluZGV4KSB7CiAgICAgIGNvbnN0IGN1cnJlbnRVdWlkID0gdGhpcy53aWRnZXQuc3VydmV5Lml0ZW1zW3F1ZXN0aW9uSW5kZXhdLml0ZW1fdXVpZAogICAgICByZXR1cm4gdGhpcy5hbnN3ZXJzLmZpbmQoYSA9PiBhLnV1aWQgPT09IGN1cnJlbnRVdWlkKSB8fCBudWxsCiAgICB9LAogICAgdmFsaWRhdGVRdWVzdGlvbigpIHsKICAgICAgbGV0IHZhbGlkYXRvciA9IHRydWUKCiAgICAgIGNvbnN0IHF1ZXN0aW9uID0gdGhpcy53aWRnZXQuc3VydmV5Lml0ZW1zW3RoaXMuY3VycmVudEluZGV4XQogICAgICBpZiAodGhpcy5jdXJyZW50QW5zd2VyID09PSBudWxsICYmIChxdWVzdGlvbi5pc19vYmxpZ2F0b3J5IHx8IHF1ZXN0aW9uLmp1bXBfcnVsZXNfZW5hYmxlZCkpIHsKICAgICAgICB2YWxpZGF0b3IgPSBmYWxzZQogICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudEFuc3dlciAhPT0gbnVsbCkgewogICAgICAgIGlmIChxdWVzdGlvbi5pc19vYmxpZ2F0b3J5IHx8IHF1ZXN0aW9uLmp1bXBfcnVsZXNfZW5hYmxlZCkgewogICAgICAgICAgaWYgKHF1ZXN0aW9uLnR5cGUgIT09IGNvbnN0cy5RVUVTVElPTl9UWVBFLk9QRU4gJiYgdGhpcy5jdXJyZW50QW5zd2VyLmFuc3dlci5yZXNwb25zZS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgdmFsaWRhdG9yID0gZmFsc2UKICAgICAgICAgIH0gZWxzZSBpZiAocXVlc3Rpb24udHlwZSA9PT0gY29uc3RzLlFVRVNUSU9OX1RZUEUuT1BFTiAmJiB0aGlzLmN1cnJlbnRBbnN3ZXIuYW5zd2VyLmNvbW1lbnQgPT09ICcnKSB7CiAgICAgICAgICAgIHZhbGlkYXRvciA9IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIXZhbGlkYXRvcikgewogICAgICAgIHRoaXMuc2hvd0Vycm9yTWVzc2FnZSA9IHRydWUKICAgICAgICBjb25zdCB2bSA9IHRoaXMKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgdm0uc2hvd0Vycm9yTWVzc2FnZSA9IGZhbHNlCiAgICAgICAgfSwgMzAwMCkKICAgICAgfQogICAgICByZXR1cm4gdmFsaWRhdG9yCiAgICB9LAogICAgY2xlYXJXaWRnZXQoKSB7CiAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gMAogICAgICB0aGlzLmFuc3dlcnMgPSBbXQogICAgICB0aGlzLnN0YXJ0VGltZSA9IDAKICAgICAgdGhpcy5pbnRlcmFjdGlvblVVSUQgPSBudWxsCiAgICAgIHRoaXMuc2hvd1RoYW5rc01lc3NhZ2UgPSBmYWxzZQogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpCgogICAgLy9TZXQgdXNlciBsYW5ndWFnZQogICAgdGhpcy5sYW5ndWFnZSA9IHdpZGdldFVzZUNhc2Uuc2V0TGFuZ3VhZ2UodGhpcy53aWRnZXQpCiAgfSwKfQo="},{"version":3,"sources":["Survey.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Survey.vue","sourceRoot":"src/views/Widget","sourcesContent":["<template>\n  <div v-if=\"!showThanksMessage\">\n    <div class=\"track-question\">\n      <div class=\"error\" v-if=\"showErrorMessage\">\n        {{ userLanguage.survey.messages.obligatory }}\n      </div>\n      <DisplayWeb\n        :selectedQuestion=\"currentItem\"\n        :color=\"widget.survey.primary_color\"\n        :lang=\"language\"\n        :onSelectAnswer=\"item => selectValue(item)\"\n        :status=\"widget.survey.status\"\n        :currentAnswer=\"currentAnswer\"\n      />\n    </div>\n    <div class=\"track-footer\">\n      <a href=\"https://track.co\" target=\"_blank\"><img :src=\"logo\" width=\"30\"/></a>\n      <div class=\"track-buttons\">\n        <Button :label=\"userLanguage.survey.buttons.previous\" v-if=\"showPrevious\" :handleClick=\"handlePreviousItem\" />\n        <Button :label=\"userLanguage.survey.buttons.next\" height=\"30px\" v-if=\"showNext\" :handleClick=\"handleNextItem\" />\n        <Button :label=\"userLanguage.survey.buttons.send\" v-if=\"showSubmit\" :handleClick=\"submitCompleteAnswer\" />\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"track-message\" :style=\"{ color: colors.primaryColor }\">\n    {{ widget.thanks_message[language] || defaultMessage[language] }}\n  </div>\n</template>\n<script>\nimport { mapMutations, mapState } from 'vuex'\nimport { Button } from '@tracksale/design-system'\nimport consts from '../../consts'\nimport { userLanguage } from '../../utils/language'\nimport { getUserContextByMetric } from '../../utils/survey'\nimport DisplayWeb from '../../components/survey/DisplayWeb'\n\nimport WidgetUseCase from '../../arch/widget/usecase'\nconst widgetUseCase = new WidgetUseCase()\n\nexport default {\n  components: {\n    DisplayWeb,\n    Button,\n  },\n  props: {\n    widget: Object,\n  },\n  data() {\n    return {\n      answers: [],\n      startTime: 0,\n      currentIndex: 0,\n      interactionUUID: null,\n      showThanksMessage: false,\n      showErrorMessage: false,\n      loading: false,\n      language: 'pt_BR',\n      defaultMessage: {\n        en_US: 'Thank you for your feedback!',\n        pt_BR: 'Agradecemos por seu feedback!',\n        es_ES: '¡Gracias por tus comentarios!',\n      },\n      logo:\n        'data:image/png;base64,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',\n    }\n  },\n  computed: {\n    ...mapState({\n      customer: state => state.widget.customer,\n      interaction: state => state.widget.interaction,\n      editMode: state => state.widget.editMode,\n    }),\n    currentItem() {\n      return this.widget.survey.items[this.currentIndex]\n    },\n    currentAnswer() {\n      return this.getCurrentAnswer(this.currentIndex)\n    },\n    userLanguage() {\n      return userLanguage()\n    },\n    showNext() {\n      if (this.currentIndex === this.widget.survey.items.length - 1 || this.loading) {\n        return false\n      }\n      return true\n    },\n    showPrevious() {\n      if (this.currentIndex && !this.widget.survey.jump_rules_enabled && !this.loading) {\n        return true\n      }\n      return false\n    },\n    showSubmit() {\n      if (this.currentIndex === this.widget.survey.items.length - 1 && !this.loading) {\n        return true\n      }\n      return false\n    },\n    colors() {\n      let primaryColor = this.widget.survey.primary_color || '#354052'\n      let secondaryColor = '#fff'\n      if (!this.widget.survey_colors) {\n        secondaryColor = this.widget.secondary_color\n        primaryColor = this.widget.primary_color\n      }\n      return { primaryColor, secondaryColor }\n    },\n  },\n  methods: {\n    ...mapMutations({\n      showWidget: 'widget/showWidget',\n    }),\n    selectValue(item) {\n      const answerIndex = this.answers.findIndex(answer => answer.uuid === item.uuid)\n      if (item.answer.comment) {\n        item.answer.comment = item.answer.comment.trim()\n      }\n      if (answerIndex === -1) {\n        this.answers = this.answers.concat(item)\n      } else {\n        const newAnswers = this.answers.filter((i, index) => index !== answerIndex)\n        this.answers = newAnswers.concat(item)\n      }\n    },\n    handlePreviousItem() {\n      this.currentIndex--\n    },\n    handleNextItem() {\n      if (!this.validateQuestion()) {\n        return\n      }\n      const currentQuestionItem = this.widget.survey.items[this.currentIndex]\n      const currentAnswer = this.answers[this.currentIndex]\n\n      // Question cursor to next question\n      this.currentIndex++\n\n      if (currentQuestionItem.jump_rules_enabled) {\n        if (!currentAnswer || currentAnswer.answer.response.length === 0) {\n          this.currentIndex--\n          return\n        }\n        const context = getUserContextByMetric(\n          currentAnswer.type,\n          currentAnswer.answer.response,\n          currentQuestionItem.min_scale,\n          currentQuestionItem.max_scale,\n        )\n        const action = currentQuestionItem.jump_rules[context].action\n        if (action === consts.JUMP_ACTIONS.SPECIFIC_QUESTION) {\n          this.currentIndex = currentQuestionItem.jump_rules[context].value\n        } else if (action === consts.JUMP_ACTIONS.FINISH_SURVEY) {\n          this.submitCompleteAnswer(consts.INTERACTION_STATUS.DONE)\n          return\n        }\n      }\n\n      if (this.answers.length) {\n        this.submitPartialAnswer(consts.INTERACTION_STATUS.PARTIAL)\n      }\n    },\n    async submitPartialAnswer() {\n      if (this.editMode) {\n        return\n      }\n      const totalTime = new Date().getTime() - this.startTime\n      const surveyAnswer = {\n        questions: this.answers,\n        response_time: totalTime > 0 ? totalTime : 0,\n        status: consts.INTERACTION_STATUS.PARTIAL,\n        interaction_uuid: this.interactionUUID,\n        language: this.language,\n        customer: this.customer,\n        interaction: this.interaction,\n      }\n\n      this.interactionUUID = await widgetUseCase.postPartialAnswer(this.widget.survey_public_hash, surveyAnswer)\n    },\n    async submitCompleteAnswer() {\n      if (!this.validateQuestion()) {\n        return\n      }\n      if (this.editMode) {\n        this.showThanksMessage = true\n        const vm = this\n        setTimeout(function() {\n          vm.clearWidget()\n        }, 2000)\n        return\n      }\n      this.loading = true\n      const totalTime = new Date().getTime() - this.startTime\n      const surveyAnswer = {\n        questions: this.answers,\n        response_time: totalTime > 0 ? totalTime : 0,\n        status: consts.INTERACTION_STATUS.DONE,\n        interaction_uuid: this.interactionUUID,\n        language: this.language,\n        customer: this.customer,\n        interaction: this.interaction,\n      }\n      await widgetUseCase.postCompleteAnswer(this.widget.survey_public_hash, surveyAnswer)\n      this.showThanksMessage = true\n      const vm = this\n      this.loading = false\n      setTimeout(function() {\n        vm.showWidget(false)\n      }, 2000)\n    },\n    getCurrentAnswer(questionIndex) {\n      const currentUuid = this.widget.survey.items[questionIndex].item_uuid\n      return this.answers.find(a => a.uuid === currentUuid) || null\n    },\n    validateQuestion() {\n      let validator = true\n\n      const question = this.widget.survey.items[this.currentIndex]\n      if (this.currentAnswer === null && (question.is_obligatory || question.jump_rules_enabled)) {\n        validator = false\n      } else if (this.currentAnswer !== null) {\n        if (question.is_obligatory || question.jump_rules_enabled) {\n          if (question.type !== consts.QUESTION_TYPE.OPEN && this.currentAnswer.answer.response.length === 0) {\n            validator = false\n          } else if (question.type === consts.QUESTION_TYPE.OPEN && this.currentAnswer.answer.comment === '') {\n            validator = false\n          }\n        }\n      }\n\n      if (!validator) {\n        this.showErrorMessage = true\n        const vm = this\n        setTimeout(function() {\n          vm.showErrorMessage = false\n        }, 3000)\n      }\n      return validator\n    },\n    clearWidget() {\n      this.currentIndex = 0\n      this.answers = []\n      this.startTime = 0\n      this.interactionUUID = null\n      this.showThanksMessage = false\n    },\n  },\n  created() {\n    this.startTime = new Date().getTime()\n\n    //Set user language\n    this.language = widgetUseCase.setLanguage(this.widget)\n  },\n}\n</script>\n<style scoped>\n.track-footer {\n  margin-bottom: 20px;\n  padding-left: 20px;\n  padding-right: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.track-question {\n  max-height: 500px;\n  overflow: auto;\n  padding: 20px;\n}\n.track-buttons {\n  display: flex;\n}\n.track-buttons > button {\n  margin-right: 10px;\n}\n.track-message {\n  padding: 20px;\n}\n.error {\n  color: #ea575f;\n  margin-bottom: 10px;\n}\n</style>\n"]}]}