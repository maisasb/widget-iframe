{"remainingRequest":"/home/track/workplace/a2/frontend/widget/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/track/workplace/a2/frontend/widget/src/components/survey/Nps.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/track/workplace/a2/frontend/widget/src/components/survey/Nps.vue","mtime":1618838230177},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBRdWVzdGlvbkNvbnRhaW5lciBmcm9tICcuL1F1ZXN0aW9uQ29udGFpbmVyJwppbXBvcnQgQnV0dG9uUXVlc3Rpb24gZnJvbSAnLi9CdXR0b25RdWVzdGlvbkNvbXBvbmVudCcKaW1wb3J0IF8gZnJvbSAnbG9kYXNoJwppbXBvcnQgU3VydmV5VXNlQ2FzZSBmcm9tICcuLi8uLi9hcmNoL3N1cnZleS91c2VjYXNlJwpjb25zdCBzdXJ2ZXlVc2VDYXNlID0gbmV3IFN1cnZleVVzZUNhc2UoKQoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgQnV0dG9uUXVlc3Rpb24sIFF1ZXN0aW9uQ29udGFpbmVyIH0sCiAgcHJvcHM6IHsKICAgIHNlbGVjdGVkUXVlc3Rpb246IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgbGFuZzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdwdF9CUicKICAgIH0sCiAgICBucHNfdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0sCiAgICBvblNlbGVjdEFuc3dlcjogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogKCkgPT4geyB9CiAgICB9LAogICAgY29sb3I6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgc3RhdHVzOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMQogICAgfSwKICAgIGN1cnJlbnRBbnN3ZXI6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbW1lbnQ6ICcnLAogICAgICBhbnN3ZXI6ICcnLAogICAgICBydWxlczogewogICAgICAgIG1heDogdiA9PiB2Lmxlbmd0aCA8PSA1MDAwIHx8IHRoaXMuJHQoJ2dlbmVyYWwucnVsZXMubWF4X2xlbmd0aCcpICsgJyA1MDAwJwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcGxhY2Vob2xkZXIgKCkgewogICAgICByZXR1cm4gc3VydmV5VXNlQ2FzZS5nZXRDb21tZW50UGxhY2Vob2xkZXIodGhpcy5sYW5nKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0SXRlbTogXy5kZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIHV1aWQ6IHRoaXMuc2VsZWN0ZWRRdWVzdGlvbi5pdGVtX3V1aWQsCiAgICAgICAgdHlwZTogdGhpcy5zZWxlY3RlZFF1ZXN0aW9uLnR5cGUsCiAgICAgICAgYW5zd2VyOiB7CiAgICAgICAgICByZXNwb25zZTogdGhpcy5hbnN3ZXIsCiAgICAgICAgICBjb21tZW50OiB0aGlzLmNvbW1lbnQsCiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm9uU2VsZWN0QW5zd2VyKHJlc3BvbnNlKQogICAgfSwgMjUwKSwKICAgIGNoZWNrRGV0cmFjdG9yQW5zd2VyICgpIHsKICAgICAgaWYgKHRoaXMuYW5zd2VyID09PSAnJykgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGNvbnN0IGFuc3dlck51bWJlciA9IE51bWJlcih0aGlzLmFuc3dlcikKICAgICAgaWYgKGFuc3dlck51bWJlciA9PT0gMTAgfHwgYW5zd2VyTnVtYmVyID09PSA5KSB7CiAgICAgICAgcmV0dXJuICdwcm9tb3RlcicKICAgICAgfSBlbHNlIGlmIChhbnN3ZXJOdW1iZXIgPT09IDcgfHwgYW5zd2VyTnVtYmVyID09PSA4KSB7CiAgICAgICAgcmV0dXJuICduZXV0cmFsJwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnZGV0cmFjdG9yJwogICAgICB9CiAgICB9LAogICAgc2VsZWN0QW5zd2VyIChpdGVtKSB7CiAgICAgIHRoaXMuYW5zd2VyID0gaXRlbQogICAgICB0aGlzLnNlbGVjdEl0ZW0oaXRlbSkKICAgIH0KICB9LAogIG1vdW50ZWQgKCkgewogICAgaWYgKHRoaXMuY3VycmVudEFuc3dlcj8uYW5zd2VyPy5jb21tZW50KSB7CiAgICAgIHRoaXMuY29tbWVudCA9IHRoaXMuY3VycmVudEFuc3dlci5hbnN3ZXIuY29tbWVudAogICAgfQogICAgaWYgKHRoaXMuY3VycmVudEFuc3dlcj8uYW5zd2VyPy5yZXNwb25zZSAhPSBudWxsKSB7CiAgICAgIHRoaXMuYW5zd2VyID0gTnVtYmVyKHRoaXMuY3VycmVudEFuc3dlci5hbnN3ZXIucmVzcG9uc2UpCiAgICB9CiAgICB0aGlzLiR3YXRjaCgnY29tbWVudCcsICgpID0+IHRoaXMuc2VsZWN0SXRlbSh0aGlzLmFuc3dlcikpCiAgfQp9Cg=="},{"version":3,"sources":["Nps.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Nps.vue","sourceRoot":"src/components/survey","sourcesContent":["<template>\n  <QuestionContainer\n    :status=\"status\"\n    :questionText=\"selectedQuestion.question[lang]\"\n    :isObligatory=\"selectedQuestion.is_obligatory\"\n    :color=\"color\">\n    <template v-slot:buttons>\n      <div>\n        <button-question\n          :questionType=\"selectedQuestion.type\"\n          :scale_type=0\n          :min_scale=0\n          :max_scale=10\n          :button_design=selectedQuestion.button_design\n          :color_pattern=selectedQuestion.color_pattern\n          :reverse=selectedQuestion.inverted_scale\n          :custom_color=selectedQuestion.custom_color\n          :onClick=\"(item) => selectAnswer(item)\"\n          :current_response=\"currentAnswer ? currentAnswer.answer.response : null\"\n          :language=\"lang\" />\n      </div>\n\n \n    </template>\n    <template v-slot:comment>\n      <div v-if=\"selectedQuestion.comments_enabled\">\n        <!-- Detractor question -->\n        <div v-show=\"checkDetractorAnswer() ==='detractor'\" class=\"subtitle\">\n          <div v-if=\" selectedQuestion.detractor_comment_question !== undefined &&\n        selectedQuestion.detractor_comment_question[lang] !== ''\">\n            {{selectedQuestion.detractor_comment_question[lang]}}</div>\n          <input v-model=\"comment\" autogrow :placeholder=\"placeholder\" class=\"survey-input\" :rules=\"[rules.max]\" />\n        </div>\n\n        <!-- Neutral question -->\n        <div v-show=\"checkDetractorAnswer() === 'neutral'\" class=\"subtitle\">\n          <div v-if=\"selectedQuestion.neutral_comment_question !== undefined &&\n        selectedQuestion.neutral_comment_question[lang] !== ''\">\n            {{selectedQuestion.neutral_comment_question[lang]}}</div>\n          <input v-model=\"comment\" autogrow :placeholder=\"placeholder\" class=\"survey-input\" :rules=\"[rules.max]\" />\n        </div>\n\n        <!-- Promoter question -->\n        <div v-show=\"checkDetractorAnswer() === 'promoter'\" class=\"subtitle\">\n          <div v-if=\"selectedQuestion.promoter_comment_question !== undefined &&\n        selectedQuestion.promoter_comment_question[lang] !== ''\">\n            {{selectedQuestion.promoter_comment_question[lang]}}</div>\n          <input v-model=\"comment\" autogrow :placeholder=\"placeholder\" class=\"survey-input\" :rules=\"[rules.max]\" />\n        </div>\n      </div>\n    </template>\n  </QuestionContainer>\n</template>\n<script>\nimport QuestionContainer from './QuestionContainer'\nimport ButtonQuestion from './ButtonQuestionComponent'\nimport _ from 'lodash'\nimport SurveyUseCase from '../../arch/survey/usecase'\nconst surveyUseCase = new SurveyUseCase()\n\nexport default {\n  components: { ButtonQuestion, QuestionContainer },\n  props: {\n    selectedQuestion: {\n      type: Object\n    },\n    lang: {\n      type: String,\n      default: 'pt_BR'\n    },\n    nps_type: {\n      type: String\n    },\n    onSelectAnswer: {\n      type: Function,\n      default: () => { }\n    },\n    color: {\n      type: String\n    },\n    status: {\n      type: Number,\n      default: 1\n    },\n    currentAnswer: {\n      type: Object\n    }\n  },\n  data () {\n    return {\n      comment: '',\n      answer: '',\n      rules: {\n        max: v => v.length <= 5000 || this.$t('general.rules.max_length') + ' 5000'\n      }\n    }\n  },\n  computed: {\n    placeholder () {\n      return surveyUseCase.getCommentPlaceholder(this.lang)\n    }\n  },\n  methods: {\n    selectItem: _.debounce(function () {\n      const response = {\n        uuid: this.selectedQuestion.item_uuid,\n        type: this.selectedQuestion.type,\n        answer: {\n          response: this.answer,\n          comment: this.comment,\n        }\n      }\n\n      this.onSelectAnswer(response)\n    }, 250),\n    checkDetractorAnswer () {\n      if (this.answer === '') {\n        return\n      }\n      const answerNumber = Number(this.answer)\n      if (answerNumber === 10 || answerNumber === 9) {\n        return 'promoter'\n      } else if (answerNumber === 7 || answerNumber === 8) {\n        return 'neutral'\n      } else {\n        return 'detractor'\n      }\n    },\n    selectAnswer (item) {\n      this.answer = item\n      this.selectItem(item)\n    }\n  },\n  mounted () {\n    if (this.currentAnswer?.answer?.comment) {\n      this.comment = this.currentAnswer.answer.comment\n    }\n    if (this.currentAnswer?.answer?.response != null) {\n      this.answer = Number(this.currentAnswer.answer.response)\n    }\n    this.$watch('comment', () => this.selectItem(this.answer))\n  }\n}\n</script>\n"]}]}