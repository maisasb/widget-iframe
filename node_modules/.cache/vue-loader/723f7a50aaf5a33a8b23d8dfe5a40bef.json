{"remainingRequest":"/home/track/workplace/a2/frontend/widget/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/track/workplace/a2/frontend/widget/src/components/MultipleChoice.vue?vue&type=style&index=0&id=6ce76181&scoped=true&lang=css&","dependencies":[{"path":"/home/track/workplace/a2/frontend/widget/src/components/MultipleChoice.vue","mtime":1618504560311},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5vcHRpb24gewogIGNvbG9yOiAjN2Y4ZmE0OwogIGZvbnQtc2l6ZTogMTZweDsKCiAgbWFyZ2luLWJvdHRvbTogMTBweDsKICBtYXJnaW4tcmlnaHQ6IDVweDsKICBjdXJzb3I6IHBvaW50ZXI7CgogIGJvcmRlcjogMXB4IHNvbGlkICM4MjgyODI7CiAgYm9yZGVyLXJhZGl1czogMTZweDsKICBwYWRkaW5nOiA1cHggMTBweDsKICAvKiBtaW4td2lkdGg6IDI4MHB4OyAqLwogIGRpc3BsYXk6IGZsZXg7Cn0KCi5vcHRpb24gLmNob2ljZSB7CiAgY29sb3I6ICMzMzM3NTk7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBvcGFjaXR5OiAwLjQ7CiAgbWFyZ2luLXJpZ2h0OiAyMHB4OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQoub3B0aW9uIC50ZXh0IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KLm9wdGlvbl9zZWxlY3RlZCB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMTksIDIxOSwgMjE5LCAwLjc0KTsKfQoub3B0aW9uOmhvdmVyOm5vdCgub3B0aW9uX3NlbGVjdGVkKSB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMzgsIDIzOCwgMjM4LCAwLjYzNyk7Cn0KLm90aGVyIHsKICBjb2xvcjogIzMzMzc1OTsKfQo="},{"version":3,"sources":["MultipleChoice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MultipleChoice.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <QuestionContainer\n    :badgeText=\"$t('survey.question_type.multiple_choice')\"\n    :status=\"status\"\n    :questionText=\"selectedQuestion.question[lang]\"\n    :isObligatory=\"selectedQuestion.is_obligatory\"\n    :color=\"color\">\n    <template v-slot:buttons>\n      <div :class=\"selectedQuestion.horizontal_align ? 'flex ' : 'inline-block'\">\n        <div v-for=\"(option,index) in optionsList\" :key=\"index\">\n          <div class=\"option\" @click=\"selectOption(option)\" :ref=\"'ref_'+index\">\n            <div class=\"choice notranslate\"> {{letters[index]}} </div>\n            <div class=\"text\"> {{option[lang]}}</div>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"selectedQuestion.option_other\">\n        <div class=\"flex\">\n          <div class=\"q-mt-md q-mr-sm other\"> {{optionOther}} </div>\n          <q-input dense v-model=\"other\" style=\"width: 50%\" class=\"survey-input\" />\n        </div>\n      </div>\n    </template>\n    <template v-slot:comment>\n      <div v-show=\"showComment\" class=\"subtitle\">\n        <div v-if=\"selectedQuestion.comment_question[lang] !== ''\"> {{selectedQuestion.comment_question[lang]}}</div>\n        <q-input v-model=\"comment\" autogrow :placeholder=\"$t('survey.new.placeholder_comment')\" :rules=\"[rules.max]\" class=\"survey-input\" />\n      </div>\n    </template>\n  </QuestionContainer>\n</template>\n<script>\nimport QuestionContainer from './QuestionContainer'\n\nimport _ from 'lodash'\nexport default {\n  components: { QuestionContainer },\n  props: {\n    selectedQuestion: {\n      type: Object\n    },\n    lang: {\n      type: String,\n      default: 'pt_BR'\n    },\n    onSelectAnswer: {\n      type: Function,\n      default: () => { }\n    },\n    color: {\n      type: String\n    },\n    status: {\n      type: Number,\n      default: 1\n    },\n    currentAnswer: {\n      type: Object\n    }\n  },\n  watch: {\n    other (value) {\n      if (value && !this.selectedQuestion.multiple_answers) {\n        this.answer = null\n        this.selectOption(null)\n      }\n    }\n  },\n  computed: {\n    optionOther () {\n      return surveyUseCase.getOptionOtherLabel(this.lang)\n    },\n    optionsList: {\n      get () {\n        if (this.selectedQuestion.randomize) {\n          const options = [...this.selectedQuestion.options]\n          for (let i = options.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * i)\n            const temp = options[i]\n            options[i] = options[j]\n            options[j] = temp\n          }\n          return options\n        }\n        return this.selectedQuestion.options\n      }\n    },\n    showComment () {\n      const showcomment = (this.options.length > 0 || this.other) && this.selectedQuestion.comments_enabled\n      if (!showcomment) {\n        this.clearComment()\n      }\n\n      return showcomment\n    }\n  },\n  data () {\n    return {\n      letters: surveyUseCase.getMultipleChoiceLetters(),\n      options: [],\n      other: null,\n      comment: '',\n      rules: {\n        max: v => v.length <= 5000 || this.$t('general.rules.max_length') + ' 5000'\n      }\n    }\n  },\n  methods: {\n    selectOption (option, partial) {\n      if (!this.selectedQuestion.multiple_answers) {\n        this.clearSelectedItems()\n        this.options = []\n        if (option) {\n          this.other = null\n        }\n      }\n\n      if (option != null) {\n        const index = this.optionsList.findIndex(optionlist => optionlist[this.lang] === option[this.lang])\n        const ref = 'ref_' + index\n        if (this.$refs[ref][0].classList.contains('option_selected')) {\n          this.$refs[ref][0].classList.remove('option_selected')\n          const optionIndex = this.options.findIndex(optionTemp => JSON.stringify(optionTemp) === JSON.stringify(option))\n          this.options.splice(optionIndex, 1)\n        } else {\n          this.$refs[ref][0].classList.add('option_selected')\n          this.options.push(option)\n        }\n      }\n\n      if (!partial) {\n        this.selectItem()\n      }\n    },\n    clearSelectedItems () {\n      for (let i = 0; i < this.selectedQuestion.options.length; i++) {\n        this.$refs['ref_' + i][0].classList.remove('option_selected')\n      }\n    },\n    selectItem: _.debounce(function () {\n      const response = {\n        uuid: this.selectedQuestion.item_uuid,\n        type: this.selectedQuestion.type,\n        answer: {\n          response: this.options,\n          comment: this.comment,\n          option_other: this.other\n        }\n      }\n      this.onSelectAnswer(response)\n    }, 250),\n    getLang () {\n      if (this.selectedQuestion.options) {\n        for (let key in this.selectedQuestion.options[0]) {\n          return key\n        }\n      }\n    },\n    clearComment () {\n      this.comment = ''\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      if (this.currentAnswer?.answer?.response != null) {\n        try {\n          const currentResponse = this.currentAnswer.answer.response\n          currentResponse.forEach(response => {\n            this.selectOption(response, true)\n          })\n        } catch (error) {\n          // Selected question camming from email\n          const option = this.selectedQuestion.options.find(option => {\n            return JSON.stringify(option).includes(this.currentAnswer.answer.response)\n          })\n          this.selectOption(option, true)\n        }\n      }\n      // eslint-disable-next-line\n      if (this.currentAnswer?.option_other != null) {\n        this.other = this.currentAnswer.option_other\n      }\n      this.$watch('other', () => this.selectItem())\n\n      if (this.currentAnswer?.answer?.comment) {\n        this.comment = this.currentAnswer.answer.comment\n      }\n      this.$watch('comment', () => this.selectItem())\n    })\n  }\n}\n</script>\n<style scoped>\n.option {\n  color: #7f8fa4;\n  font-size: 16px;\n\n  margin-bottom: 10px;\n  margin-right: 5px;\n  cursor: pointer;\n\n  border: 1px solid #828282;\n  border-radius: 16px;\n  padding: 5px 10px;\n  /* min-width: 280px; */\n  display: flex;\n}\n\n.option .choice {\n  color: #333759;\n  font-weight: 600;\n  opacity: 0.4;\n  margin-right: 20px;\n  display: inline-block;\n}\n.option .text {\n  display: inline-block;\n}\n.option_selected {\n  background-color: rgba(219, 219, 219, 0.74);\n}\n.option:hover:not(.option_selected) {\n  background-color: rgba(238, 238, 238, 0.637);\n}\n.other {\n  color: #333759;\n}\n</style>\n"]}]}