{"remainingRequest":"/home/track/workplace/widget-iframe/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/track/workplace/widget-iframe/src/views/Widget/Widget.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/track/workplace/widget-iframe/src/views/Widget/Widget.vue","mtime":1629147031371},{"path":"/home/track/workplace/widget-iframe/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/widget-iframe/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/track/workplace/widget-iframe/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/widget-iframe/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwU3RhdGUgfSBmcm9tICd2dWV4JwppbXBvcnQgdXNlSWZyYW1lQ29udHJvbCBmcm9tICcuLi8uLi9ob29rcy9pZnJhbWUnCmltcG9ydCBXaWRnZXRVc2VDYXNlIGZyb20gJy4uLy4uL2FyY2gvd2lkZ2V0L3VzZWNhc2UnCmNvbnN0IHdpZGdldFVzZUNhc2UgPSBuZXcgV2lkZ2V0VXNlQ2FzZSgpCgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGNvbmZpZzogT2JqZWN0LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoewogICAgICBjdXN0b21lcjogc3RhdGUgPT4gc3RhdGUud2lkZ2V0LmN1c3RvbWVyLAogICAgICB0b2tlbjogc3RhdGUgPT4gc3RhdGUud2lkZ2V0LnRva2VuLAogICAgICBzaG93OiBzdGF0ZSA9PiBzdGF0ZS53aWRnZXQuc2hvdywKICAgICAgd2lkZ2V0OiBzdGF0ZSA9PiBzdGF0ZS53aWRnZXQud2lkZ2V0LAogICAgfSksCiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBNdXRhdGlvbnMoewogICAgICBzZXRUb2tlbjogJ3dpZGdldC9zZXRUb2tlbicsCiAgICAgIHNldEN1c3RvbWVyOiAnd2lkZ2V0L3NldEN1c3RvbWVyJywKICAgICAgc2hvd1dpZGdldDogJ3dpZGdldC9zaG93V2lkZ2V0JywKICAgICAgc2V0V2lkZ2V0OiAnd2lkZ2V0L3NldFdpZGdldCcsCiAgICB9KSwKICAgIGdldElmcmFtZURhdGEoKSB7CiAgICAgIGNvbnN0IGlmcmFtZSA9IHVzZUlmcmFtZUNvbnRyb2woKQogICAgICBpZnJhbWUudXBkYXRlRGF0YUxpc3RlbmVyKCkKICAgICAgaWZyYW1lLmdldFRva2VuS2V5KCkKICAgIH0sCiAgICBzaG93V2lkZ2V0QnlVc2VyKCkgewogICAgICByZXR1cm4gd2lkZ2V0VXNlQ2FzZS5jYW5TaG93KHRoaXMud2lkZ2V0KQogICAgfSwKICAgIGFzeW5jIHNldHVwKCkgewogICAgICB0aGlzLmdldElmcmFtZURhdGEoKSAvL0dldCBkYXRhIGluIGlmcmFtZQogICAgICB0aGlzLmdldENvbmZpZ0RhdGEoKSAvL0dldCBkYXRhIGluIGNsYXNzIGNvbmZpZwoKICAgICAgLy8gY29uc3Qgc2hvdyA9IHRoaXMuc2hvd1dpZGdldEJ5VXNlcih0aGlzLndpZGdldCkKICAgICAgLy8gaWYgKCFzaG93KSB7CiAgICAgIC8vICAgcmV0dXJuCiAgICAgIC8vIH0KCiAgICAgIC8vIGNvbnN0IGRlbGF5ID0gdGhpcy53aWRnZXQuZGVsYXkgfHwgMAogICAgICAvLyBjb25zdCB2bSA9IHRoaXMKICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIC8vICAgLy8gc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgLy8gICB2bS5zaG93V2lkZ2V0KHNob3cpCiAgICAgIC8vIH0sIGRlbGF5ICogMTAwMCkKCiAgICAgIC8vIHdpZGdldFVzZUNhc2Uuc2V0U2hvd0F0KCkKICAgICAgLy8gd2lkZ2V0VXNlQ2FzZS5wb3N0T3BlbkNvdW50ZXIoKQogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNldHVwKCkKICB9LAp9Cg=="},{"version":3,"sources":["Widget.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Widget.vue","sourceRoot":"src/views/Widget","sourcesContent":["<template>\n  <div v-if=\"show\">\n    Widget\n  </div>\n</template>\n<script>\nimport { mapMutations, mapState } from 'vuex'\nimport useIframeControl from '../../hooks/iframe'\nimport WidgetUseCase from '../../arch/widget/usecase'\nconst widgetUseCase = new WidgetUseCase()\n\nexport default {\n  props: {\n    config: Object,\n  },\n  data() {\n    return {\n    }\n  },\n  computed: {\n    ...mapState({\n      customer: state => state.widget.customer,\n      token: state => state.widget.token,\n      show: state => state.widget.show,\n      widget: state => state.widget.widget,\n    }),\n  },\n  methods: {\n    ...mapMutations({\n      setToken: 'widget/setToken',\n      setCustomer: 'widget/setCustomer',\n      showWidget: 'widget/showWidget',\n      setWidget: 'widget/setWidget',\n    }),\n    getIframeData() {\n      const iframe = useIframeControl()\n      iframe.updateDataListener()\n      iframe.getTokenKey()\n    },\n    showWidgetByUser() {\n      return widgetUseCase.canShow(this.widget)\n    },\n    async setup() {\n      this.getIframeData() //Get data in iframe\n      this.getConfigData() //Get data in class config\n\n      // const show = this.showWidgetByUser(this.widget)\n      // if (!show) {\n      //   return\n      // }\n\n      // const delay = this.widget.delay || 0\n      // const vm = this\n      // setTimeout(() => {\n      //   // startTime = new Date().getTime()\n      //   vm.showWidget(show)\n      // }, delay * 1000)\n\n      // widgetUseCase.setShowAt()\n      // widgetUseCase.postOpenCounter()\n    },\n  },\n  created() {\n    this.setup()\n  },\n}\n</script>\n"]}]}