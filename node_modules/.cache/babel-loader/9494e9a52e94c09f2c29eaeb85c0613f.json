{"remainingRequest":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js!/home/track/workplace/a2/frontend/widget/node_modules/eslint-loader/index.js??ref--13-0!/home/track/workplace/a2/frontend/widget/src/utils/http.js","dependencies":[{"path":"/home/track/workplace/a2/frontend/widget/src/utils/http.js","mtime":1626268834416},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdHJhY2svd29ya3BsYWNlL2EyL2Zyb250ZW5kL3dpZGdldC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS90cmFjay93b3JrcGxhY2UvYTIvZnJvbnRlbmQvd2lkZ2V0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwp2YXIgRU5EUE9JTlRTID0gewogICdodHRwOi8vbG9jYWxob3N0OjgwODAnOiAnaHR0cDovL2xvY2FsaG9zdDo0MDAwJywKICAnaHR0cHM6Ly9kZXYudHJhY2suY28nOiAnaHR0cHM6Ly9kZXYtYXBpLnRyYWNrLmNvJywKICAnaHR0cHM6Ly9obWcudHJhY2suY28nOiAnaHR0cHM6Ly9obWctYXBpLnRyYWNrLmNvJywKICAnaHR0cHM6Ly9hcHAudHJhY2suY28nOiAnaHR0cHM6Ly9hcGkudHJhY2suY28nCn07CnZhciBXSURHRVRfU0NSSVBUX0lEID0gJ3RyYWNrd2lkZ2V0LWpzJzsKCnZhciBnZXRIb3N0QnlTY3JpcHREYXRhID0gZnVuY3Rpb24gZ2V0SG9zdEJ5U2NyaXB0RGF0YSgpIHsKICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoV0lER0VUX1NDUklQVF9JRCk7CgogIGlmIChzY3JpcHQpIHsKICAgIHZhciB1cmwgPSBuZXcgVVJMKHNjcmlwdC5zcmMpOwogICAgcmV0dXJuIEVORFBPSU5UU1t1cmwub3JpZ2luXTsKICB9CgogIHJldHVybiAnaHR0cDovL2xvY2FsaG9zdDo0MDAwJzsKfTsKCnZhciBIT1NUID0gZ2V0SG9zdEJ5U2NyaXB0RGF0YSgpOwp2YXIgaHR0cCA9IHsKICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBfZ2V0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVybCwgaW5pdCkgewogICAgICB2YXIgcmVzcG9uc2UsIGpzb247CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goSE9TVCArIHVybCwgaW5pdCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAganNvbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIGpzb24uZGF0YTsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gZ2V0KF94LCBfeDIpIHsKICAgICAgcmV0dXJuIF9nZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gZ2V0OwogIH0oKSwKICBwb3N0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3Bvc3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHVybCwgYm9keSwgaGVhZGVycykgewogICAgICB2YXIgbXlJbml0LCByZXNwb25zZSwganNvbjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBteUluaXQgPSB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwgaGVhZGVycyksCiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaChIT1NUICsgdXJsLCBteUluaXQpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAganNvbiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4ganNvbi5kYXRhOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpOwoKICAgIGZ1bmN0aW9uIHBvc3QoX3gzLCBfeDQsIF94NSkgewogICAgICByZXR1cm4gX3Bvc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gcG9zdDsKICB9KCkKfTsKZXhwb3J0IGRlZmF1bHQgaHR0cDs="},{"version":3,"sources":["/home/track/workplace/a2/frontend/widget/src/utils/http.js"],"names":["ENDPOINTS","WIDGET_SCRIPT_ID","getHostByScriptData","script","document","getElementById","url","URL","src","origin","HOST","http","get","init","fetch","response","json","data","post","body","headers","myInit","method","Accept","JSON","stringify"],"mappings":";;;;;;;AAAA,IAAMA,SAAS,GAAG;AAChB,2BAAyB,uBADT;AAEhB,0BAAwB,0BAFR;AAGhB,0BAAwB,0BAHR;AAIhB,0BAAwB;AAJR,CAAlB;AAOA,IAAMC,gBAAgB,GAAG,gBAAzB;;AAEA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAChC,MAAMC,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwBJ,gBAAxB,CAAf;;AACA,MAAIE,MAAJ,EAAY;AACV,QAAMG,GAAG,GAAG,IAAIC,GAAJ,CAAQJ,MAAM,CAACK,GAAf,CAAZ;AACA,WAAOR,SAAS,CAACM,GAAG,CAACG,MAAL,CAAhB;AACD;;AACD,SAAO,uBAAP;AACD,CAPD;;AASA,IAAMC,IAAI,GAAGR,mBAAmB,EAAhC;AAEA,IAAMS,IAAI,GAAG;AACXC,EAAAA,GAAG;AAAA,uEAAE,iBAAON,GAAP,EAAYO,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACoBC,KAAK,CAACJ,IAAI,GAAGJ,GAAR,EAAaO,IAAb,CADzB;;AAAA;AACGE,cAAAA,QADH;AAAA;AAAA,qBAEgBA,QAAQ,CAACC,IAAT,EAFhB;;AAAA;AAEGA,cAAAA,IAFH;AAAA;AAAA,qBAGUA,IAAI,CAACC,IAHf;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KADQ;AAMXC,EAAAA,IAAI;AAAA,wEAAE,kBAAOZ,GAAP,EAAYa,IAAZ,EAAkBC,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AACEC,cAAAA,MADF,GACW;AACbC,gBAAAA,MAAM,EAAE,MADK;AAEbF,gBAAAA,OAAO;AACLG,kBAAAA,MAAM,EAAE,kBADH;AAEL,kCAAgB;AAFX,mBAGFH,OAHE,CAFM;AAObD,gBAAAA,IAAI,EAAEK,IAAI,CAACC,SAAL,CAAeN,IAAf;AAPO,eADX;AAAA;AAAA,qBAWmBL,KAAK,CAACJ,IAAI,GAAGJ,GAAR,EAAae,MAAb,CAXxB;;AAAA;AAWEN,cAAAA,QAXF;AAAA;AAAA,qBAYeA,QAAQ,CAACC,IAAT,EAZf;;AAAA;AAYEA,cAAAA,IAZF;AAAA;AAAA,qBAaSA,IAAI,CAACC,IAbd;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AANO,CAAb;AAuBA,eAAeN,IAAf","sourcesContent":["const ENDPOINTS = {\n  'http://localhost:8080': 'http://localhost:4000',\n  'https://dev.track.co': 'https://dev-api.track.co',\n  'https://hmg.track.co': 'https://hmg-api.track.co',\n  'https://app.track.co': 'https://api.track.co',\n}\n\nconst WIDGET_SCRIPT_ID = 'trackwidget-js'\n\nconst getHostByScriptData = () => {\n  const script = document.getElementById(WIDGET_SCRIPT_ID)\n  if (script) {\n    const url = new URL(script.src)\n    return ENDPOINTS[url.origin]\n  }\n  return 'http://localhost:4000'\n}\n\nconst HOST = getHostByScriptData()\n\nconst http = {\n  get: async (url, init) => {\n    const response = await fetch(HOST + url, init)\n    const json = await response.json()\n    return await json.data\n  },\n  post: async (url, body, headers) => {\n    const myInit = {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        ...headers,\n      },\n      body: JSON.stringify(body),\n    }\n\n    const response = await fetch(HOST + url, myInit)\n    const json = await response.json()\n    return await json.data\n  },\n}\n\nexport default http\n"]}]}