{"remainingRequest":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js!/home/track/workplace/a2/frontend/widget/node_modules/eslint-loader/index.js??ref--13-0!/home/track/workplace/a2/frontend/widget/src/utils/http.js","dependencies":[{"path":"/home/track/workplace/a2/frontend/widget/src/utils/http.js","mtime":1618574544859},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3RyYWNrL3dvcmtwbGFjZS9hMi9mcm9udGVuZC93aWRnZXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CnZhciBFTkRQT0lOVFMgPSB7CiAgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCc6ICdodHRwOi8vbG9jYWxob3N0OjQwMDAnLAogICdodHRwczovL2Rldi50cmFjay5jbyc6ICdodHRwczovL2Rldi1hcGkudHJhY2suY28nLAogICdodHRwczovL2htZy50cmFjay5jbyc6ICdodHRwczovL2htZy1hcGkudHJhY2suY28nLAogICdodHRwczovL2FwcC50cmFjay5jbyc6ICdodHRwczovL2FwaS50cmFjay5jbycKfTsKdmFyIFdJREdFVF9TQ1JJUFRfSUQgPSAndHJhY2t3aWRnZXQtanMnOwoKdmFyIGdldEhvc3RCeVNjcmlwdERhdGEgPSBmdW5jdGlvbiBnZXRIb3N0QnlTY3JpcHREYXRhKCkgewogIHZhciBzY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChXSURHRVRfU0NSSVBUX0lEKTsKCiAgaWYgKHNjcmlwdCkgewogICAgdmFyIHVybCA9IG5ldyBVUkwoc2NyaXB0LnNyYyk7CiAgICByZXR1cm4gRU5EUE9JTlRTW3VybC5vcmlnaW5dOwogIH0KCiAgcmV0dXJuICdodHRwOi8vbG9jYWxob3N0OjQwMDAnOwp9OwoKdmFyIEhPU1QgPSBnZXRIb3N0QnlTY3JpcHREYXRhKCk7CnZhciBodHRwID0gewogIGdldDogZnVuY3Rpb24gKCkgewogICAgdmFyIF9nZXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodXJsKSB7CiAgICAgIHZhciByZXNwb25zZSwganNvbjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBmZXRjaChIT1NUICsgdXJsKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBqc29uID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4ganNvbi5kYXRhOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICBmdW5jdGlvbiBnZXQoX3gpIHsKICAgICAgcmV0dXJuIF9nZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gZ2V0OwogIH0oKSwKICBwb3N0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3Bvc3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHVybCwgYm9keSkgewogICAgICB2YXIgbXlJbml0LCByZXNwb25zZSwganNvbjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBteUluaXQgPSB7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKEhPU1QgKyB1cmwsIG15SW5pdCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBqc29uID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBqc29uLmRhdGE7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi5zZW50KTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gcG9zdChfeDIsIF94MykgewogICAgICByZXR1cm4gX3Bvc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gcG9zdDsKICB9KCkKfTsKZXhwb3J0IGRlZmF1bHQgaHR0cDs="},{"version":3,"sources":["/home/track/workplace/a2/frontend/widget/src/utils/http.js"],"names":["ENDPOINTS","WIDGET_SCRIPT_ID","getHostByScriptData","script","document","getElementById","url","URL","src","origin","HOST","http","get","fetch","response","json","data","post","body","myInit","method","headers","JSON","stringify"],"mappings":";;;;;;AACA,IAAMA,SAAS,GAAG;AACd,2BAAyB,uBADX;AAEd,0BAAwB,0BAFV;AAGd,0BAAwB,0BAHV;AAId,0BAAwB;AAJV,CAAlB;AAOA,IAAMC,gBAAgB,GAAG,gBAAzB;;AAEA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAC9B,MAAMC,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwBJ,gBAAxB,CAAf;;AACA,MAAIE,MAAJ,EAAY;AACR,QAAMG,GAAG,GAAG,IAAIC,GAAJ,CAAQJ,MAAM,CAACK,GAAf,CAAZ;AACA,WAAOR,SAAS,CAACM,GAAG,CAACG,MAAL,CAAhB;AACH;;AACD,SAAO,uBAAP;AACH,CAPD;;AASA,IAAMC,IAAI,GAAGR,mBAAmB,EAAhC;AAGA,IAAMS,IAAI,GAAG;AACTC,EAAAA,GAAG;AAAA,uEAAE,iBAAON,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACsBO,KAAK,CAACH,IAAI,GAAGJ,GAAR,CAD3B;;AAAA;AACKQ,cAAAA,QADL;AAAA;AAAA,qBAEkBA,QAAQ,CAACC,IAAT,EAFlB;;AAAA;AAEKA,cAAAA,IAFL;AAAA;AAAA,qBAGYA,IAAI,CAACC,IAHjB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KADM;AAMTC,EAAAA,IAAI;AAAA,wEAAE,kBAAOX,GAAP,EAAYY,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACIC,cAAAA,MADJ,GACa;AACXC,gBAAAA,MAAM,EAAE,MADG;AAEXC,gBAAAA,OAAO,EAAE;AACL,4BAAU,kBADL;AAEL,kCAAgB;AAFX,iBAFE;AAMXH,gBAAAA,IAAI,EAAEI,IAAI,CAACC,SAAL,CAAeL,IAAf;AANK,eADb;AAAA;AAAA,qBAUqBL,KAAK,CAACH,IAAI,GAAGJ,GAAR,EAAaa,MAAb,CAV1B;;AAAA;AAUIL,cAAAA,QAVJ;AAAA;AAAA,qBAWiBA,QAAQ,CAACC,IAAT,EAXjB;;AAAA;AAWIA,cAAAA,IAXJ;AAAA;AAAA,qBAYWA,IAAI,CAACC,IAZhB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AANK,CAAb;AAsBA,eAAeL,IAAf","sourcesContent":["\nconst ENDPOINTS = {\n    'http://localhost:8080': 'http://localhost:4000',\n    'https://dev.track.co': 'https://dev-api.track.co',\n    'https://hmg.track.co': 'https://hmg-api.track.co',\n    'https://app.track.co': 'https://api.track.co'\n}\n\nconst WIDGET_SCRIPT_ID = 'trackwidget-js'\n\nconst getHostByScriptData = () => {\n    const script = document.getElementById(WIDGET_SCRIPT_ID)\n    if (script) {\n        const url = new URL(script.src)\n        return ENDPOINTS[url.origin]\n    }\n    return 'http://localhost:4000'\n}\n\nconst HOST = getHostByScriptData()\n\n\nconst http = {\n    get: async (url) => {\n        const response = await fetch(HOST + url)\n        const json = await response.json()\n        return await json.data\n    },\n    post: async (url, body) => {\n        const myInit = {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(body)\n        }\n\n        const response = await fetch(HOST + url, myInit)\n        const json = await response.json()\n        return await json.data\n    }\n}\n\nexport default http"]}]}