{"remainingRequest":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js!/home/track/workplace/a2/frontend/widget/node_modules/eslint-loader/index.js??ref--13-0!/home/track/workplace/a2/frontend/widget/src/trackWidget.js","dependencies":[{"path":"/home/track/workplace/a2/frontend/widget/src/trackWidget.js","mtime":1620908067435},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvdHJhY2svd29ya3BsYWNlL2EyL2Zyb250ZW5kL3dpZGdldC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvdHJhY2svd29ya3BsYWNlL2EyL2Zyb250ZW5kL3dpZGdldC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL3RyYWNrL3dvcmtwbGFjZS9hMi9mcm9udGVuZC93aWRnZXQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgQXBwIGZyb20gJy4vQXBwLnZ1ZSc7CmltcG9ydCBzdG9yZSBmcm9tICcuL3N0b3JlJzsKVnVlLmNvbmZpZy5wcm9kdWN0aW9uVGlwID0gZmFsc2U7CnZhciBJbnN0YW5jZSA9IG5ldyBWdWUoewogIHN0b3JlOiBzdG9yZSwKICBjb21wb25lbnRzOiB7CiAgICBBcHA6IEFwcAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbmZpZzoge30KICAgIH07CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihjcmVhdGVFbGVtZW50KSB7CiAgICByZXR1cm4gY3JlYXRlRWxlbWVudCgnYXBwJywgewogICAgICBwcm9wczogewogICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcKICAgICAgfQogICAgfSk7CiAgfQp9KTsKCnZhciBUcmFja1dpZGdldCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gVHJhY2tXaWRnZXQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJhY2tXaWRnZXQpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFRyYWNrV2lkZ2V0LCBbewogICAga2V5OiAiY3JlYXRlV2lkZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVXaWRnZXQoY29uZmlnKSB7CiAgICAgIGNvbmZpZy5zaG93ID0gdHJ1ZTsgLy9Nb3VudCB3aWRnZXQgdnVlIGluc3RhbmNlCgogICAgICB2YXIgZWxlbWVudElkID0gJyc7CgogICAgICBpZiAoY29uZmlnLmFwcGVuZFRvKSB7CiAgICAgICAgZWxlbWVudElkID0gY29uZmlnLmFwcGVuZFRvOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBkaXYuaWQgPSAndHJhY2std2lkZ2V0X19jb250YWluZXInOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICBlbGVtZW50SWQgPSAndHJhY2std2lkZ2V0X19jb250YWluZXInOwogICAgICB9CgogICAgICBWdWUuc2V0KEluc3RhbmNlLCAnY29uZmlnJywgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjb25maWcpLCB7fSwgewogICAgICAgIGFwaUtleTogY29uZmlnLmtleSwKICAgICAgICAvLyBpZCBpcyBvcHRpb25hbC4gYnV0IGFsbG93cyBzZXR0aW5nIHRoZSBhcHAncyBgaWRgIGR5bmFtaWNhbGx5IHRvIHNhbWUgYGlkYAogICAgICAgIC8vIGFzIHRoZSBjb250ZXh0IHBhZ2UgcGxhY2Vob2xkZXIgKHdoaWNoIGFwcCByZXBsYWNlcyksIGZvciBjb25zaXN0ZW5jeQogICAgICAgIC8vIGZvciB0aGlzLCB5b3UgaGF2ZSB0byBhc3NpZ24gYGNvbmZpZy5pZGAgdG8gQXBwJ3MgYCRlbGAgaW4gaXRzIGBtb3VudGVkKClgCiAgICAgICAgaWQ6IGVsZW1lbnRJZCAvLyBvciBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5pZCB8fCAnc29tZUNsYXNzQXBwJwoKICAgICAgfSkpOwoKICAgICAgaWYgKGVsZW1lbnRJZCkgewogICAgICAgIEluc3RhbmNlLiRtb3VudCgnIycgKyBlbGVtZW50SWQpOwogICAgICB9CgogICAgICByZXR1cm4gSW5zdGFuY2U7CiAgICB9CiAgfV0sIFt7CiAgICBrZXk6ICJzaG93V2lkZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93V2lkZ2V0KHNob3cpIHsKICAgICAgSW5zdGFuY2UuY29uZmlnLnNob3cgPSBzaG93OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFRyYWNrV2lkZ2V0Owp9KCk7IC8vIG9wdGlvbmFsIGV4cG9ydHMsIHVzZWQgZm9yIHR5cGUgaW5oZXJpdGFuY2UgdGhyb3VnaG91dCB0aGUgYXBwCi8vIGV4cG9ydCBjb25zdCB7ICRzdG9yZSB9ID0gSW5zdGFuY2U7CgoKZXhwb3J0IHsgVHJhY2tXaWRnZXQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/home/track/workplace/a2/frontend/widget/src/trackWidget.js"],"names":["Vue","App","store","config","productionTip","Instance","components","data","render","createElement","props","TrackWidget","show","elementId","appendTo","div","document","id","body","appendChild","set","apiKey","key","$mount"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEAF,GAAG,CAACG,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AAEA,IAAMC,QAAQ,GAAG,IAAIL,GAAJ,CAAQ;AACvBE,EAAAA,KAAK,EAALA,KADuB;AAEvBI,EAAAA,UAAU,EAAE;AAAEL,IAAAA,GAAG,EAAHA;AAAF,GAFW;AAGvBM,EAAAA,IAAI,EAAE;AAAA,WAAO;AAAEJ,MAAAA,MAAM,EAAE;AAAV,KAAP;AAAA,GAHiB;AAIvBK,EAAAA,MAAM,EAAE,gBAASC,aAAT,EAAwB;AAC9B,WAAOA,aAAa,CAAC,KAAD,EAAQ;AAC1BC,MAAAA,KAAK,EAAE;AAAEP,QAAAA,MAAM,EAAE,KAAKA;AAAf;AADmB,KAAR,CAApB;AAGD;AARsB,CAAR,CAAjB;;IAWqBQ,W;AACnB,yBAAc;AAAA;AAAE;;;;WAChB,sBAAaR,MAAb,EAAqB;AACnBA,MAAAA,MAAM,CAACS,IAAP,GAAc,IAAd,CADmB,CAGnB;;AACA,UAAIC,SAAS,GAAG,EAAhB;;AACA,UAAIV,MAAM,CAACW,QAAX,EAAqB;AACnBD,QAAAA,SAAS,GAAGV,MAAM,CAACW,QAAnB;AACD,OAFD,MAEO;AACL,YAAMC,GAAG,GAAGC,QAAQ,CAACP,aAAT,CAAuB,KAAvB,CAAZ;AACAM,QAAAA,GAAG,CAACE,EAAJ,GAAS,yBAAT;AACAD,QAAAA,QAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0BJ,GAA1B;AACAF,QAAAA,SAAS,GAAG,yBAAZ;AACD;;AAEDb,MAAAA,GAAG,CAACoB,GAAJ,CAAQf,QAAR,EAAkB,QAAlB,kCACKF,MADL;AAEEkB,QAAAA,MAAM,EAAElB,MAAM,CAACmB,GAFjB;AAGE;AACA;AACA;AACAL,QAAAA,EAAE,EAAEJ,SANN,CAOE;;AAPF;;AASA,UAAIA,SAAJ,EAAe;AACbR,QAAAA,QAAQ,CAACkB,MAAT,CAAgB,MAAMV,SAAtB;AACD;;AAED,aAAOR,QAAP;AACD;;;WAED,oBAAkBO,IAAlB,EAAwB;AACtBP,MAAAA,QAAQ,CAACF,MAAT,CAAgBS,IAAhB,GAAuBA,IAAvB;AACD;;;;KAGH;AACA;;;SAtCqBD,W","sourcesContent":["import Vue from 'vue'\nimport App from './App.vue'\nimport store from './store'\n\nVue.config.productionTip = false\n\nconst Instance = new Vue({\n  store,\n  components: { App },\n  data: () => ({ config: {} }),\n  render: function(createElement) {\n    return createElement('app', {\n      props: { config: this.config },\n    })\n  },\n})\n\nexport default class TrackWidget {\n  constructor() {}\n  createWidget(config) {\n    config.show = true\n\n    //Mount widget vue instance\n    let elementId = ''\n    if (config.appendTo) {\n      elementId = config.appendTo\n    } else {\n      const div = document.createElement('div')\n      div.id = 'track-widget__container'\n      document.body.appendChild(div)\n      elementId = 'track-widget__container'\n    }\n\n    Vue.set(Instance, 'config', {\n      ...config,\n      apiKey: config.key,\n      // id is optional. but allows setting the app's `id` dynamically to same `id`\n      // as the context page placeholder (which app replaces), for consistency\n      // for this, you have to assign `config.id` to App's `$el` in its `mounted()`\n      id: elementId,\n      // or document.querySelector(selector).id || 'someClassApp'\n    })\n    if (elementId) {\n      Instance.$mount('#' + elementId)\n    }\n\n    return Instance\n  }\n\n  static showWidget(show) {\n    Instance.config.show = show\n  }\n}\n\n// optional exports, used for type inheritance throughout the app\n// export const { $store } = Instance;\n"]}]}