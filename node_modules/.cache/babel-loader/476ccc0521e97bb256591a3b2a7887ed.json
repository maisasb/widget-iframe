{"remainingRequest":"/home/track/workplace/a2/frontend/widget/node_modules/thread-loader/dist/cjs.js!/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js!/home/track/workplace/a2/frontend/widget/node_modules/eslint-loader/index.js??ref--13-0!/home/track/workplace/a2/frontend/widget/src/hooks/iframe.js","dependencies":[{"path":"/home/track/workplace/a2/frontend/widget/src/hooks/iframe.js","mtime":1618512667688},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/track/workplace/a2/frontend/widget/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlSWZyYW1lQ29udHJvbCgpIHsKICBmdW5jdGlvbiB1cGRhdGVEYXRhTGlzdGVuZXIoKSB7CiAgICBjb25zb2xlLmxvZygnY2hhbW91IG8gbWV0b2RvIGxpc3RlbmVyJyk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zb2xlLmxvZygnZW52aW91IG1lbnNhZ2VtJywgZXZlbnQuZGF0YSk7CiAgICAgIGlmICghZXZlbnQuZGF0YS5pc1dpZGdldCkgcmV0dXJuOwoKICAgICAgaWYgKGV2ZW50LmRhdGEuY3VzdG9tZXIpIHsKICAgICAgICBjb25zb2xlLmxvZyhldmVudC5kYXRhLmN1c3RvbWVyKTsKICAgICAgICBzdG9yZS5jb21taXQoJ3N1cnZleS9zZXRDdXN0b21lcicsIGV2ZW50LmRhdGEuY3VzdG9tZXIpOwogICAgICB9CgogICAgICBpZiAoZXZlbnQuZGF0YS5pbnRlcmFjdGlvbikgewogICAgICAgIHN0b3JlLmNvbW1pdCgnc3VydmV5L3NldEludGVyYWN0aW9uJywgZXZlbnQuZGF0YS5pbnRlcmFjdGlvbik7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgcmV0dXJuIHsKICAgIHVwZGF0ZURhdGFMaXN0ZW5lcjogdXBkYXRlRGF0YUxpc3RlbmVyCiAgfTsKfQ=="},{"version":3,"sources":["/home/track/workplace/a2/frontend/widget/src/hooks/iframe.js"],"names":["store","useIframeControl","updateDataListener","console","log","window","addEventListener","event","data","isWidget","customer","commit","interaction"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,UAAlB;AAEA,eAAe,SAASC,gBAAT,GAA6B;AACxC,WAASC,kBAAT,GAA+B;AAC3BC,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,UAACC,KAAD,EAAW;AAC1CJ,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BG,KAAK,CAACC,IAArC;AACA,UAAI,CAACD,KAAK,CAACC,IAAN,CAAWC,QAAhB,EAA0B;;AAG1B,UAAIF,KAAK,CAACC,IAAN,CAAWE,QAAf,EAAyB;AACrBP,QAAAA,OAAO,CAACC,GAAR,CAAYG,KAAK,CAACC,IAAN,CAAWE,QAAvB;AACAV,QAAAA,KAAK,CAACW,MAAN,CAAa,oBAAb,EAAmCJ,KAAK,CAACC,IAAN,CAAWE,QAA9C;AACH;;AACD,UAAIH,KAAK,CAACC,IAAN,CAAWI,WAAf,EAA4B;AACxBZ,QAAAA,KAAK,CAACW,MAAN,CAAa,uBAAb,EAAsCJ,KAAK,CAACC,IAAN,CAAWI,WAAjD;AACH;AACJ,KAZD;AAaH;;AAED,SAAO;AACHV,IAAAA,kBAAkB,EAAlBA;AADG,GAAP;AAGH","sourcesContent":["import store from '../store'\n\nexport default function useIframeControl () {\n    function updateDataListener () {\n        console.log('chamou o metodo listener')\n        window.addEventListener('message', (event) => {\n            console.log('enviou mensagem', event.data)\n            if (!event.data.isWidget) return\n\n\n            if (event.data.customer) {\n                console.log(event.data.customer)\n                store.commit('survey/setCustomer', event.data.customer)\n            }\n            if (event.data.interaction) {\n                store.commit('survey/setInteraction', event.data.interaction)\n            }\n        })\n    }\n\n    return {\n        updateDataListener\n    }\n}"]}]}